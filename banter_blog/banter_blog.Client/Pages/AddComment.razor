@rendermode InteractiveAuto


<EditForm OnValidSubmit="OnCommentSubmit" Model="commentModel" >
    <textarea @bind="@commentModel.CommentText" class="form-control" placeholder="Leave comment here..."></textarea>
    <button type="submit" class="btn btn-primary">Submit</button>
    
</EditForm>


@inject HttpClient _request;
@code {


    [Parameter]
    public int PostId { get; set; }

    [Parameter]
    public string UserId { get; set; }

    private CommentModel commentModel = new CommentModel();



    protected override void OnInitialized()
    {
        commentModel = new CommentModel();
    }

    public async Task OnCommentSubmit()
    {
        if(!String.IsNullOrEmpty(commentModel.CommentText)) {

         var request = new PostBlogCommentRequest(commentModel.CommentText, UserId, PostId);

        var response = await _request.PostAsJsonAsync<PostBlogCommentRequest>("/Comment/", request);

        if(response.IsSuccessStatusCode)
        {
            
        }
        }
    }

    public class CommentModel
    {
        public string CommentText { get; set; }
    }
}
